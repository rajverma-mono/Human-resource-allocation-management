<div class="p-8 max-w-6xl mx-auto bg-white shadow rounded">

  <h2 class="text-xl font-bold mb-6">{{ formConfig.title }}</h2>

  <div class="grid gap-5" [ngClass]="formConfig.layout === 'two-column' ? 'grid-cols-2' : 'grid-cols-1'">

    @for (field of formConfig.fields; track field.id) {
      <!-- TEXT / EMAIL / NUMBER -->
      @if (field.type === 'text' || field.type === 'email' || field.type === 'number') {
        <atom-input 
          [label]="field.label"
          [type]="field.type"
          [placeholder]="field.label"
          [required]="field.required || false"
          [validation]="field.validationType || 'none'"
          [errorMessage]="field.errorMessage || ''"
          [backgroundColor]="field.backgroundColor || 'bg-white'"
          [(value)]="form[field.id]">
        </atom-input>
      }

      <!-- RADIO -->
      @if (field.type === 'radio') {
        <atom-radio-group 
          [options]="field.options ?? []"
          [(selectedValue)]="form[field.id]">
        </atom-radio-group>
      }

      <!-- SELECT -->
      @if (field.type === 'select') {
        <atom-select 
          [label]="field.label"
          [options]="field.options ?? []"
          [(value)]="form[field.id]">
        </atom-select>
      }

      <!-- DATE -->
      @if (field.type === 'date') {
        <atom-date-picker 
          [label]="field.label"
          [(value)]="form[field.id]">
        </atom-date-picker>
      }

      <!-- TEXTAREA -->
      @if (field.type === 'textarea') {
        <atom-textarea 
          [label]="field.label"
          [rows]="field.rows || 3"
          [(value)]="form[field.id]">
        </atom-textarea>
      }

      <!-- TOGGLE -->
      @if (field.type === 'toggle') {
        <div class="flex items-center gap-2">
          <label>{{ field.label }}</label>
          <span class="px-3 py-1 bg-yellow-200 rounded text-sm">TODO toggle atom</span>
        </div>
      }
    }
  </div>

  <!-- ACTION BUTTONS -->
  <div class="flex justify-end gap-3 mt-6">
    @for (act of formConfig.actions; track act.id) {
      <atom-button 
        [label]="act.label"
        [variant]="act.variant"
        (onClick)="act.id === 'save' ? save() : cancel()">
      </atom-button>
    }
  </div>

</div>